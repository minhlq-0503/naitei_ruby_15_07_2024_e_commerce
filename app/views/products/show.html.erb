<% provide :title, t(".title") %>
<h1><%= t ".title" %></h1>

<div class="product-container">
  <div class="product-info">
    <div class="product-image">
      <%= image_tag resized_image(@product), alt: @product.product_name, class: "product-image" %>
    </div>

    <div class="product-details">
      <h2><%= t ".product", name: @product.product_name.upcase %></h2>

      <p><strong><%= t ".category" %>:</strong> <%= @product.category_category_name %></p>

      <p><strong><%= t ".description" %>:</strong> <%= @product.description %></p>

      <p><strong><%= t ".stock" %>:</strong> <%= @product.stock %></p>
    </div>
  </div>

  <div class="product-price-row">
    <p class="product-price"><%= t ".price" %>: <span><%= number_to_currency(@product.price, unit: "â‚«", precision: 0) %></span></p>
    <div id="cart_button_<%= @product.id %>">
      <% if current_user %>
        <% if @cart %>
          <%= render partial: "carts/cart_button", locals: { cart: @cart } %>
        <% else %>
          <%= button_to t(".add_to_cart"), carts_path(product_id: @product.id), method: :post, class: "btn btn-primary", data: { turbo: "true" } %>
        <% end %>
      <% else %>
        <button id="show-login-popup" class="btn btn-primary"><%= t ".add_to_cart" %></button>
      <% end %>
    </div>
  </div>
</div>
